
{% extends 'base.html' %}
{% block content %}
    <div class="container mt-5">
      <h1>Transcription Review</h1>
      <div class="card mt-3" style="width: 50%;">
        <div class="card-body">
          <h5 class="card-title" id="transcript-title">{{ transcripts[0].transcript }}</h5>
          <audio id="audio-player" src="{{ url_for('uploaded_file', filename=transcripts[0].audio_file_name) }}" preload="auto"></audio>
        </div>

    </div>
  

          <button id="play-button" class="btn btn-primary" onclick="togglePlay()">Play</button>
          <button id="thumbs-up" class="btn btn-success">Thumbs Up</button>
          <button id="thumbs-down" class="btn btn-danger">Thumbs Down</button>
          <button id="prev-button" class="btn btn-secondary" onclick="navigate(-1)">Previous</button>
          <button id="next-button" class="btn btn-secondary" onclick="navigate(1)">Next</button>

    <script>
      let transcripts = {{ transcripts | tojson }};
      let currentIndex = 0;
      const audioPlayer = document.getElementById('audio-player');
      const transcriptTitle = document.getElementById('transcript-title');

      function togglePlay() {
        if (audioPlayer.paused) {
          audioPlayer.play();
        } else {
          audioPlayer.pause();
        }
      }

      function navigate(step) {
        currentIndex += step;
        if (currentIndex < 0) {
          currentIndex = 0;
        } else if (currentIndex >= transcripts.length) {
          currentIndex = transcripts.length - 1;
        }

        audioPlayer.src = "{{ url_for('uploaded_file', filename='') }}" + transcripts[currentIndex].audio_file_name;
        transcriptTitle.textContent = transcripts[currentIndex].transcript;
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
{% endblock %}


